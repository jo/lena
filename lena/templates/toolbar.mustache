{{#canWrite}}
  <menu type=toolbar>
    <p>
      <button class=logo>TF</button>
      <button data-action=new>New</button>
      {{#list}}
        <button data-action=sort>Sort</button>
      {{/list}}
      {{#show}}
        <button data-action=edit>Meta</button>
        <button data-action=copy>Copy</button>
        <button data-action=destroy>Delete</button>
      {{/show}}
      <button data-action=logout>Logout</button>
    </p>
    {{#show}}
      <p class=format>
        <button title=Heading data-command=formatBlock data-value=H1>H</button>
        <button title=Paragraph data-command=formatBlock data-value=P>P</button>
        <button title=bold data-command=bold>b</button>
        <button title=italic data-command=italic>i</button>
        <button title=underline data-command=underline>u</button>
        <button title=List data-command=insertUnorderedList>&equiv;</button>
        <button title=Link data-command=createLink data-get=href data-ask="Please enter the URL. Use 'mailto:me@example.com' to link to an e-mail address." data-default="http://">a</button>
      </p>
      <p class=images>
        {{#images}}
          <button data-command=insertImage data-value="{{url}}" data-filename="{{name}}" style="background-image: url({{url}})" title="{{name}}"></button><sup><a href=# data-action=delete-image title="Delete image {{name}}" data-filename="{{name}}">Ã—</a></sup>
        {{/images}}
      </p>
    {{/show}}
    <form data-dialog=new style="display:none">
      <fieldset>
        <legend>New Page</legend>
        <p>
          <label>Folder</label>
          <input tabindex=1 type=text name=folder required pattern="[^\/]+" value="{{currentFolder}}">
          {{#folders}}
            <button data-folder="{{.}}">{{.}}</button>
          {{/folders}}
        </p>
        <p>
          <label>Name</label>
          <input tabindex=2 type=text name=_id required pattern="[-_+a-zA-Z0-9]+">
          <em>Only letters, numbers and -, + and _ allowed.</em>
        </p>
        <p>
          <label>Title</label>
          <input tabindex=3 type=text name=title required size=42>
        </p>
        <p>
          <label>Subtitle</label>
          <input tabindex=4 type=text name=subtitle value="{{subtitle}}" size=42>
          <input tabindex=5 type=submit value="Create New Page">
        </p>
      </fieldset>
    </form>
    <form data-dialog=edit style="display:none">
      {{#pages}}
        <fieldset>
          <legend>Page Meta Information</legend>
          <p>
            <label>Folder</label>
            <input type=text name=folder value="{{folder}}" required pattern="[^\/]+">
            {{#folders}}
              <button data-folder="{{.}}">{{.}}</button>
            {{/folders}}
          </p>
          <p>
            <label>Name</label>
            <input tabindex=2 type=text name=_id value="{{_id}}" required disabled>
            <em>The name can not be changed.</em>
          </p>
          <p>
            <label>Title</label>
            <input type=text name=title value="{{title}}" required size=42>
          </p>
          <p>
            <label>Subtitle</label>
            <input type=text name=subtitle value="{{subtitle}}" size=42>
            <input type=submit value="Update Meta Information">
          </p>
        </fieldset>
      {{/pages}}
    </form>
    <form data-dialog=copy style="display:none">
      {{#pages}}
        <fieldset>
          <legend>Copy Page</legend>
          <p>
            <label>New Name</label>
            <input tabindex=2 type=text name=_id required pattern="[-_+a-zA-Z0-9]+">
            <em>Only letters, numbers and -, + and _ allowed.</em>
            <input tabindex=5 type=submit value="Copy Page">
          </p>
        </fieldset>
      {{/pages}}
    </form>
    <form data-dialog=sort style="display:none">
      <fieldset>
        <legend>Order Pages</legend>
        <p>
          Drag Pages into their desired order.
          Press <input type=submit value="Finish"> when done.
        </p>
      </fieldset>
    </form>
  </menu>
{{/canWrite}}
