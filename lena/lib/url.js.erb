(function(url) {
  url || (url = {});

  // check if param pairs match,
  // eg
  // [
  //   ['a', 'a']
  // ] -> true
  // [
  //   ['a', 'a']
  //   ['a', 'b']
  // ] -> false
  url.match = function(params) {
    return _.all(params, function(parts) {
      return encodeURIComponent(parts[0]) === encodeURIComponent(parts[1]);
    });
  };
  
  // return url for folder
  // eg /portraits/
  url.folder = function(name) {
    return '/' + encodeURIComponent(name);
  };
  
  // return url for page model,
  // eg /portraits/kjkj19
  url.page = function(model) {
    return '/' + encodeURIComponent(model.folder) + '/' + encodeURIComponent(model._id);
  };
  
  // return url for image,
  // eg /portraits/kjkj19/myfile.png
  url.image = function(model, name) {
    return '/' + encodeURIComponent(model.folder) + '/' + encodeURIComponent(model._id) + '/' + encodeURIComponent(name);
  };

  return url;
})(typeof module !== 'undefined' && module.exports ? exports : {});
